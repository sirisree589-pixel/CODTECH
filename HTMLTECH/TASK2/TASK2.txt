<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CODTECH | Task 2 â€“ Chat App</title>
<style>
  body{margin:0;font-family:Segoe UI,Arial;background:#0b1220;color:#e6eef8;display:flex;flex-direction:column;align-items:center;min-height:100vh;}
  header{background:#071627;width:100%;padding:14px 20px;text-align:center;font-size:20px;font-weight:600;}
  #chatBox{width:95%;max-width:700px;margin-top:20px;background:#081223;border-radius:10px;padding:16px;display:flex;flex-direction:column;height:75vh;}
  #messages{flex:1;overflow-y:auto;margin-bottom:10px;}
  .msg{background:#101c34;padding:10px;border-radius:8px;margin-bottom:8px;}
  .meta{font-size:12px;color:#94a3b8;margin-bottom:2px;}
  #inputArea{display:flex;}
  #inputArea input{flex:1;padding:10px;border:none;border-radius:6px;margin-right:8px;}
  #inputArea button{background:#60a5fa;color:#07102a;border:none;padding:10px 14px;border-radius:6px;font-weight:600;cursor:pointer;}
</style>
</head>
<body>
<header>ðŸ’¬ CODTECH â€“ Chat Application</header>

<div id="chatBox">
  <div id="messages"></div>
  <div id="inputArea">
    <input type="text" id="username" placeholder="Your Name" style="max-width:120px;margin-right:6px;">
    <input type="text" id="message" placeholder="Type a messageâ€¦">
    <button onclick="sendMessage()">Send</button>
  </div>
</div>

<script>
  const messagesDiv = document.getElementById('messages');
  const messageInput = document.getElementById('message');
  const usernameInput = document.getElementById('username');

  // Load existing messages
  function loadMessages(){
    const msgs = JSON.parse(localStorage.getItem('chatMsgs') || '[]');
    messagesDiv.innerHTML = '';
    msgs.forEach(m => addMessageToDOM(m));
  }

  // Add one message element
  function addMessageToDOM(m){
    const div = document.createElement('div');
    div.className = 'msg';
    div.innerHTML = `<div class="meta">${m.user} â€¢ ${new Date(m.time).toLocaleTimeString()}</div><div>${m.text}</div>`;
    messagesDiv.appendChild(div);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  // Send message
  function sendMessage(){
    const text = messageInput.value.trim();
    const user = usernameInput.value.trim() || 'Guest';
    if(!text) return;
    const msg = {user,text,time:Date.now()};
    const msgs = JSON.parse(localStorage.getItem('chatMsgs') || '[]');
    msgs.push(msg);
    localStorage.setItem('chatMsgs', JSON.stringify(msgs));
    addMessageToDOM(msg);
    messageInput.value='';
  }

  // React to storage changes (simulate realtime)
  window.addEventListener('storage', e=>{
    if(e.key==='chatMsgs') loadMessages();
  });

  loadMessages();
</script>
</body>
</html>
